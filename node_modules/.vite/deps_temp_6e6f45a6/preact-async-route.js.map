{
  "version": 3,
  "sources": ["../../preact-async-route/src/index.js"],
  "sourcesContent": ["import { h, Component } from 'preact';\n\nclass AsyncRoute extends Component {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.state = {\n\t\t\tcomponentData: null\n\t\t};\n\t}\n\tloadComponent(){\n\t\tif (this.props.component) {\n\t\t\treturn this.setState({\n\t\t\t\tcomponentData: this.props.component\n\t\t\t});\n\t\t}\n\t\tconst componentData = this.props.getComponent(this.props.url, ({component}) => {\n\t\t\t// Named param for making callback future proof\n\t\t\tif (component) {\n\t\t\t\tthis.setState({\n\t\t\t\t\tcomponentData: component\n\t\t\t\t});\n\t\t\t}\n\t\t}, Object.assign({}, this.props, this.props.matches));\n\n\t\t// In case returned value was a promise\n\t\tif (componentData && componentData.then) {\n\t\t\t// IIFE to check if a later ending promise was creating a race condition\n\t\t\t// Check test case for more info\n\t\t\t((url)=>{\n\t\t\t\tcomponentData.then(component => {\n\t\t\t\t\tif (url !== this.props.url) {\n\t\t\t\t\t\tthis.setState({componentData: null}, () => {\n\t\t\t\t\t\t\tthis.loadComponent();\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tcomponentData: component\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t})(this.props.url);\n\t\t}\n\t}\n\tcomponentWillReceiveProps(nextProps){\n\t\tif (this.props.path && this.props.path !== nextProps.path) {\n\t\t\tthis.setState({\n\t\t\t\tcomponentData: null\n\t\t\t}, ()=>{\n\t\t\t\tthis.loadComponent();\n\t\t\t});\n\t\t}\n\t}\n\tcomponentWillMount(){\n\t\tthis.loadComponent();\n\t}\n\trender(){\n\t\tif (this.state.componentData) {\n\t\t\treturn h(this.state.componentData, this.props);\n\t\t} else if (this.props.loading) {\n\t\t\tconst loadingComponent = this.props.loading();\n\t\t\treturn loadingComponent;\n\t\t}\n\t\treturn null;\n\t}\n}\n\nexport default AsyncRoute;\n"],
  "mappings": ";;;;;;;;AAAA;AAEA,IAAM,aAAN,cAAyB,EAAU;AAAA,EAClC,cAAc;AACb,UAAM;AACN,SAAK,QAAQ;AAAA,MACZ,eAAe;AAAA,IAChB;AAAA,EACD;AAAA,EACA,gBAAe;AACd,QAAI,KAAK,MAAM,WAAW;AACzB,aAAO,KAAK,SAAS;AAAA,QACpB,eAAe,KAAK,MAAM;AAAA,MAC3B,CAAC;AAAA,IACF;AACA,UAAM,gBAAgB,KAAK,MAAM,aAAa,KAAK,MAAM,KAAK,CAAC,EAAC,UAAS,MAAM;AAE9E,UAAI,WAAW;AACd,aAAK,SAAS;AAAA,UACb,eAAe;AAAA,QAChB,CAAC;AAAA,MACF;AAAA,IACD,GAAG,OAAO,OAAO,CAAC,GAAG,KAAK,OAAO,KAAK,MAAM,OAAO,CAAC;AAGpD,QAAI,iBAAiB,cAAc,MAAM;AAGxC,OAAC,CAAC,QAAM;AACP,sBAAc,KAAK,eAAa;AAC/B,cAAI,QAAQ,KAAK,MAAM,KAAK;AAC3B,iBAAK,SAAS,EAAC,eAAe,KAAI,GAAG,MAAM;AAC1C,mBAAK,cAAc;AAAA,YACpB,CAAC;AACD;AAAA,UACD;AACA,eAAK,SAAS;AAAA,YACb,eAAe;AAAA,UAChB,CAAC;AAAA,QACF,CAAC;AAAA,MACF,GAAG,KAAK,MAAM,GAAG;AAAA,IAClB;AAAA,EACD;AAAA,EACA,0BAA0B,WAAU;AACnC,QAAI,KAAK,MAAM,QAAQ,KAAK,MAAM,SAAS,UAAU,MAAM;AAC1D,WAAK,SAAS;AAAA,QACb,eAAe;AAAA,MAChB,GAAG,MAAI;AACN,aAAK,cAAc;AAAA,MACpB,CAAC;AAAA,IACF;AAAA,EACD;AAAA,EACA,qBAAoB;AACnB,SAAK,cAAc;AAAA,EACpB;AAAA,EACA,SAAQ;AACP,QAAI,KAAK,MAAM,eAAe;AAC7B,aAAO,EAAE,KAAK,MAAM,eAAe,KAAK,KAAK;AAAA,IAC9C,WAAW,KAAK,MAAM,SAAS;AAC9B,YAAM,mBAAmB,KAAK,MAAM,QAAQ;AAC5C,aAAO;AAAA,IACR;AACA,WAAO;AAAA,EACR;AACD;AAEA,IAAO,cAAQ;",
  "names": []
}
